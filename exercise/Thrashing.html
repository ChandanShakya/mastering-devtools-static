<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mastering Chrome DevTools</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/prism.css" />
    <link rel="stylesheet" href="/css/thrashing.css" />
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="/">Introduction to Chrome DevTools v4</a></li>
        <li><a href="/lessons">Lessons</a></li>
        <li><a href="/exercises">Exercises</a></li>
      </ul>
    </nav>
    <article id="main">
      <h1>Bouncing Balls - Unoptimized Version</h1>
      <button id="optimizeBtn">Optimize</button>
      <div id="container"></div>

      <div id="explainer">
        <p>
          In this exercise, we have an animation of multiple balls bouncing
          within a container. Initially, the animation is slow and janky because
          it repeatedly reads and writes layout properties like offsetLeft,
          offsetTop, style.left, and style.top inside a loop. This causes
          frequent layout recalculations, known as layout thrashing, which
          burdens the browser's main thread and degrades performance.
        </p>
        <p>
          When the “Optimize” button is clicked, the animation is refactored to
          store positions in JavaScript variables and update the ball positions
          using CSS transform: translate(), instead of left and top. This
          approach avoids triggering layout recalculations because transforms
          are handled by the GPU, leading to smoother animations. Additionally,
          the code switches to using requestAnimationFrame(), which synchronizes
          animation updates with the browser's rendering cycle for better
          efficiency.
        </p>
        <p>
          The key takeaway is that frequent DOM reads and writes can negatively
          impact performance. By minimizing layout-dependent operations and
          leveraging CSS transforms and requestAnimationFrame(), we create
          efficient, high-performance animations. For more details, you can
          refer to MDN's guides on High Performance Animations and Optimizing
          JavaScript animations.
        </p>
      </div>

      <h2 id="finished-">Finished?</h2>
      <p>Head back to the <a href="/lesson/CPU">CPU Lesson</a></p>
    </article>
    <script src="/js/prism.js"></script>
    <script src="/js/thrashing.js"></script>
  </body>
</html>
